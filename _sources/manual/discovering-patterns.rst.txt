====================
Discovering patterns
====================

Patterns are useful to identify hyperedge structures from which knowledge can be inferred. To facilitate the discovery of such patterns, Graphbrain provides the ``PatternCounter``, a class in the ``graphbrain.patterns`` module. By creating an instance of this class, one can feed it a collection of hyperedges and then obtain the most frequent patterns inferred from these hyperedges. This way, empirical sources can be used to guide the discovery of knowledge inference methods. We will see that ``PatternCounter`` can be tuned to focus on specific constructs and to operate at different levels of abstraction.


A simple example
================

To exemplify, let us first generate a hypergraph parsed from real text. For this, we will use the "wikipedia" agent. Agents will be discussed in a subsequent section, but for now it is enough to know that the "wikipedia" agent extracts the text from a Wikipedia page identified by it's URL, and then populates a hypergraph by parsing each sentence of the text into a hyperedge. Let us run the agent from the command line::

   $ graphbrain --hg ai.hg --url https://en.wikipedia.org/wiki/Artificial_intelligence --agent wikipedia run


Once it finishes, we will have the ``ai.hg`` hypergraph database in the current directory. Let us now simply find the most common patterns in this hypergraph::

   from graphbrain import hgraph
   from graphbrain.patterns import PatternCounter

   hg = hgraph('ai.hg')
   pc = PatternCounter()
   for edge in hg.all():
      pc.count(edge)

We see above that we create a ``PatternCounter`` object and then iterate through all the hyperedges in the hypergraph, feeding it to the counter one at a time by way of calling the ``count(edge)`` method. Let us now query for the 10 most common patterns found::

   >> pc.patterns.most_common(10)
   [((*/M */C), 10715),
    ((*/B.ma */C */C), 6204),
    ((*/J */C */C), 3113),
    ((*/M (*/M */C)), 2135),
    ((*/T */C), 1694),
    ((*/B.ma (*/M */C) */C), 1621),
    ((*/B.ma */C (*/M */C)), 1364),
    ((*/B.mm */C */C), 1078),
    ((*/M (*/B.ma */C */C)), 994),
    ((*/B.ma */C (*/B.ma */C */C)), 796)]

